<html>

<head>
    <title>W04: Task 01</title>
</head>

<body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>
        var svg = d3.select("body").append("svg");
        var csv = "https://kyohe1.github.io/siVofnI2021/W04/w04_task2.csv";
        var padding = 20;


        d3.csv(csv, function (data) {
            var nest = d3.nest()
                    .key(d => d.year).sortKeys(d3.ascending)
                    .key(d => d.month).sortKeys(d3.ascending)
                    .key(d => d.date).sortKeys(d3.ascending)
                    .entries(data);
            data = data.slice(0, 15);
            svg.selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("x", padding)
                .attr("y", (d, i) => padding + i * (d.h + padding))
                .attr("width", d => d)
                .attr("height", d => d.h)
                .style("fill", "black")
                .append("text")
                .attr("x", padding - 10)
                .attr("y", svg.attr("y"))
                .text(d => d.prefectureNameE)
                .attr("fill", "black")
                .attr("font-size", "12px")
                .attr('text-anchor', "middle");
        });
    </script>
</body>

</html>